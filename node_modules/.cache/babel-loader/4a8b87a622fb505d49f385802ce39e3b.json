{"ast":null,"code":"import * as PIXI from \"pixi.js\";\nimport blueGradient from \"../assets/blue-gradient.png\";\nimport * as CONST from \"./const.js\";\nimport plusButton from \"../assets/Plus.png\";\nimport minusButton from \"../assets/Minus.png\";\nimport QuestionMark from '../assets/QuestionMark.png';\nimport { fontWeight } from \"@material-ui/system\";\nlet createjs = window.createjs;\nexport const init = (app, setup) => {\n  let WINDOW_WIDTH = setup.width;\n  let WINDOW_HEIGHT = setup.height;\n  let wallWidth = 0.8 * setup.width;\n  let wallX = 50;\n  let height = WINDOW_HEIGHT / 15;\n  let backGround = new PIXI.Sprite.from(CONST.ASSETS.BLUE_GRADIENT);\n  backGround.width = WINDOW_WIDTH;\n  backGround.height = WINDOW_HEIGHT;\n  backGround.x = 0;\n  backGround.y = 0;\n  backGround.alpha = 0;\n  app.stage.addChild(backGround);\n  createjs.Tween.get(backGround).to({\n    alpha: 1\n  }, 500, createjs.Ease.getPowInOut(4));\n  let resetButton = new PIXI.Sprite.from(CONST.ASSETS.RESET);\n  resetButton.interactive = true;\n  resetButton.x = height / 2;\n  resetButton.y = height / 2;\n  resetButton.width = height;\n  resetButton.height = height;\n  resetButton.on('pointerdown', reset);\n  app.stage.addChild(resetButton); // Denominator of the row that's currently place on the number line.\n\n  let activeRow = 12; // Numerator of Active Row (this is the fraction that will be shaded)\n\n  let activeNum = 0; // Is the program currently swapping rows?\n\n  let swapping = false;\n  var graphics = new PIXI.Graphics();\n  graphics.lineStyle(4, 0xc0ffee, 1);\n  graphics.beginFill(0xfe6f61);\n  graphics.drawRect(0, 0, 50, 100);\n  graphics.endFill();\n  var activeTexture = app.renderer.generateTexture(graphics);\n  const labels = {\n    1: \"One Whole\",\n    2: \"One Half\",\n    3: \"One Third\",\n    4: \"Fourth\",\n    5: \"5th\",\n    6: \"6th\",\n    7: \"7th\",\n    8: \"8th\",\n    9: \"9th\",\n    10: \"10th\",\n    11: \"11th\",\n    12: \"12th\"\n  }; // Constructors\n\n  function distance(a, b) {\n    let x1 = a[0];\n    let y1 = a[1];\n    let x2 = b[0];\n    let y2 = b[1];\n    let dX = x2 - x1;\n    let dY = y2 - y1;\n    return Math.sqrt(Math.pow(dX, 2) + Math.pow(dY, 2));\n  }\n\n  const wallObj = {\n    1: [],\n    2: [],\n    3: [],\n    4: [],\n    5: [],\n    6: [],\n    7: [],\n    8: [],\n    9: [],\n    10: [],\n    11: [],\n    12: []\n  };\n\n  for (var i = 1; i <= 12; i++) {\n    let w = wallWidth / i;\n\n    for (var j = 0; j < i; j++) {\n      let h = height;\n      let x = j * w + w / 2 + (WINDOW_WIDTH - wallWidth) / 2;\n      let y = i * h;\n      let tile = createTile(x, y, w, h, i);\n      wallObj[i].push(tile);\n      app.stage.addChild(tile);\n    }\n  }\n\n  function newTexture(self, color) {\n    var graphics = new PIXI.Graphics();\n    graphics.lineStyle(3, 0xb7b7b7, 1);\n    graphics.beginFill(color);\n    graphics.drawRoundedRect(0, 0, self.width - 3, self.height - 3, 3);\n    graphics.endFill();\n    return app.renderer.generateTexture(graphics);\n  }\n\n  function swapCompleted() {\n    swapping = false;\n  }\n\n  function reset() {\n    let keys = Object.keys(wallObj);\n    keys.forEach(k => {\n      let r = wallObj[k];\n      r.forEach(e => {\n        e.tile.texture = newTexture(this, 0xffffff);\n      });\n    });\n  }\n\n  function moveRowUp(row) {\n    row.forEach(t => createjs.Tween.get(t).to({\n      y: t.y - height\n    }, 1000, createjs.Ease.getPowInOut(4)));\n  }\n\n  function moveRowDown(row) {\n    row.forEach(t => createjs.Tween.get(t).to({\n      y: t.y + height\n    }, 1000, createjs.Ease.getPowInOut(4)));\n  }\n\n  function sendRowToBottom(row1, row2, start) {\n    let y1 = row1[0].y;\n    let y2 = row2[0].y;\n    swapping = true;\n\n    for (var row in wallObj) {\n      if (wallObj[row][0].y > start) {\n        moveRowUp(wallObj[row]);\n      }\n    }\n\n    row1.forEach(t => createjs.Tween.get(t).to({\n      y: 12 * height\n    }, 1000, createjs.Ease.getPowInOut(4)).call(swapCompleted));\n  }\n\n  let tickArray = [];\n\n  function initTickArray(d) {\n    for (var i = 0; i <= 12; i++) {\n      let tick = new PIXI.Graphics();\n      tick.lineStyle(4, 0xb7b7b7, 1);\n      tick.moveTo(wallX, 12.5 * height);\n      tick.lineTo(wallX, 13.5 * height);\n      app.stage.addChild(tick);\n      tickArray.push(tick);\n      createjs.Tween.get(tick).to({\n        x: wallWidth / d * i\n      }, 1000, createjs.Ease.getPowInOut(4));\n    }\n  }\n\n  function drawNumberLine(den) {\n    let line = new PIXI.Graphics();\n    line.lineStyle(4, 0xb7b7b7, 1);\n    line.moveTo(wallX, 13 * height);\n    line.lineTo(wallX + wallWidth, 13 * height);\n    app.stage.addChild(line);\n  }\n\n  function animateTicks(den) {\n    tickArray.forEach((t, i) => {\n      if (i > den) {\n        createjs.Tween.get(t).to({\n          x: wallWidth\n        }, 1000, createjs.Ease.getPowInOut(4));\n      } else {\n        createjs.Tween.get(t).to({\n          x: wallWidth / den * i\n        }, 1000, createjs.Ease.getPowInOut(4));\n      }\n    });\n  }\n\n  function swapRow(row, start, end) {\n    if (Math.abs(start - end) < 30) {\n      row.forEach(t => createjs.Tween.get(t).to({\n        y: start\n      }, 1000, createjs.Ease.getPowInOut(4)).call(swapCompleted));\n    } // Moved up\n    else if (start > end) {\n        for (var r in wallObj) {\n          if (wallObj[r][0].y < start && wallObj[r][0].y > end) {\n            moveRowDown(wallObj[r]);\n          }\n        }\n\n        let roundedEnd = Math.ceil(end / height) * height;\n        row.forEach(t => createjs.Tween.get(t).to({\n          y: roundedEnd\n        }, 1000, createjs.Ease.getPowInOut(4)).call(swapCompleted));\n      } // Moved down\n      else if (start < end) {\n          for (var r in wallObj) {\n            if (wallObj[r][0].y > start && wallObj[r][0].y < end) {\n              moveRowUp(wallObj[r]);\n            }\n          }\n\n          let roundedEnd = Math.floor(end / height) * height;\n          row.forEach(t => createjs.Tween.get(t).to({\n            y: roundedEnd\n          }, 1000, createjs.Ease.getPowInOut(4)).call(swapCompleted));\n        }\n  }\n\n  function createTile(x, y, w, h, d) {\n    var graphics = new PIXI.Graphics();\n    graphics.lineStyle(3, 0xb7b7b7, 1);\n    graphics.beginFill(0xffffff);\n    graphics.drawRoundedRect(0, 0, w, h, 3);\n    graphics.endFill();\n    var texture = app.renderer.generateTexture(graphics);\n    let tile = new PIXI.Sprite(texture);\n    tile.anchor.set(0.5);\n    let den = new PIXI.Text(labels[d], {\n      fontFamily: \"Arial\",\n      fontSize: h / 2,\n      fill: 0xffffff,\n      align: \"center\"\n    });\n    den.anchor.set(0.5);\n    let tileContainer = new PIXI.Container();\n    tile.on(\"pointerdown\", onDragStart);\n    tileContainer.addChild(tile);\n    tileContainer.addChild(den);\n    tileContainer.active = false;\n    tileContainer.interactive = true;\n    tileContainer.den = d;\n    tileContainer.buttonMode = true; //tileContainer.anchor.set(0.5);\n\n    tileContainer.on(\"pointerdown\", onDragStart).on(\"pointerup\", onDragEnd).on(\"pointerupoutside\", onDragEnd).on(\"pointermove\", onDragMove); // move the sprite to its designated position\n\n    tileContainer.x = x;\n    tileContainer.y = y;\n    tileContainer.tile = tile;\n    return tileContainer;\n  }\n\n  function onDragStart(event) {\n    if (!swapping) {\n      console.log(\"setting dragging to true\");\n      this.dragging = true;\n      this.dragStartedAt = this.y;\n      this.data = event.data;\n      this.alpha = 0.5;\n    }\n  }\n\n  function onDragEnd() {\n    if (this.wasDragged) {\n      this.wasDragged = false;\n      let row = wallObj[this.den];\n      activeRow = this.den;\n      swapRow(row, this.dragStartedAt, this.y);\n\n      if (this.y > 12 * height) {\n        animateTicks(activeRow);\n      }\n    } else {\n      this.active = !this.active;\n      this.tile.texture = this.active ? newTexture(this, 0xfe6f61) : newTexture(this, 0xffffff);\n    }\n\n    this.alpha = 1;\n    this.dragging = false;\n    this.data = null;\n  }\n\n  function onDragMove() {\n    if (this.dragging) {\n      this.wasDragged = true;\n      var newPosition = this.data.getLocalPosition(this.parent);\n      wallObj[this.den].forEach(t => {\n        t.parent.addChild(t);\n        t.y = newPosition.y;\n      });\n    }\n  }\n};","map":{"version":3,"sources":["/Users/andrewfenner/Documents/MindResearch/Prototypes/newtestunit/src/js/oldfractionwall.js"],"names":["PIXI","blueGradient","CONST","plusButton","minusButton","QuestionMark","fontWeight","createjs","window","init","app","setup","WINDOW_WIDTH","width","WINDOW_HEIGHT","height","wallWidth","wallX","backGround","Sprite","from","ASSETS","BLUE_GRADIENT","x","y","alpha","stage","addChild","Tween","get","to","Ease","getPowInOut","resetButton","RESET","interactive","on","reset","activeRow","activeNum","swapping","graphics","Graphics","lineStyle","beginFill","drawRect","endFill","activeTexture","renderer","generateTexture","labels","distance","a","b","x1","y1","x2","y2","dX","dY","Math","sqrt","pow","wallObj","i","w","j","h","tile","createTile","push","newTexture","self","color","drawRoundedRect","swapCompleted","keys","Object","forEach","k","r","e","texture","moveRowUp","row","t","moveRowDown","sendRowToBottom","row1","row2","start","call","tickArray","initTickArray","d","tick","moveTo","lineTo","drawNumberLine","den","line","animateTicks","swapRow","end","abs","roundedEnd","ceil","floor","anchor","set","Text","fontFamily","fontSize","fill","align","tileContainer","Container","onDragStart","active","buttonMode","onDragEnd","onDragMove","event","console","log","dragging","dragStartedAt","data","wasDragged","newPosition","getLocalPosition","parent"],"mappings":"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","sourcesContent":["import * as PIXI from \"pixi.js\";\nimport blueGradient from \"../assets/blue-gradient.png\";\nimport * as CONST from \"./const.js\";\nimport plusButton from \"../assets/Plus.png\";\nimport minusButton from \"../assets/Minus.png\";\nimport QuestionMark from '../assets/QuestionMark.png'\nimport { fontWeight } from \"@material-ui/system\";\nlet createjs = window.createjs\n\nexport const init = (app, setup) => {\n \n\nlet WINDOW_WIDTH = setup.width    \nlet WINDOW_HEIGHT = setup.height\nlet wallWidth = 0.8*setup.width\nlet wallX = 50\nlet height = WINDOW_HEIGHT/15\nlet backGround = new PIXI.Sprite.from(CONST.ASSETS.BLUE_GRADIENT);\nbackGround.width = WINDOW_WIDTH;\nbackGround.height = WINDOW_HEIGHT;\nbackGround.x = 0;\nbackGround.y = 0;\nbackGround.alpha = 0;\napp.stage.addChild(backGround);\ncreatejs.Tween.get(backGround).to(\n  { alpha: 1 },\n  500,\n  createjs.Ease.getPowInOut(4)\n);\n\n\nlet resetButton = new PIXI.Sprite.from(CONST.ASSETS.RESET)\nresetButton.interactive = true\nresetButton.x = height/2\nresetButton.y = height/2\nresetButton.width = height\nresetButton.height = height\nresetButton.on('pointerdown',reset)\napp.stage.addChild(resetButton)\n// Denominator of the row that's currently place on the number line.\nlet activeRow = 12;\n\n// Numerator of Active Row (this is the fraction that will be shaded)\nlet activeNum = 0;\n\n// Is the program currently swapping rows?\nlet swapping = false;\n\nvar graphics = new PIXI.Graphics();\ngraphics.lineStyle(4, 0xc0ffee, 1);\ngraphics.beginFill(0xfe6f61);\ngraphics.drawRect(0, 0, 50, 100);\ngraphics.endFill();\n\nvar activeTexture = app.renderer.generateTexture(graphics);\n\nconst labels = {\n  1: \"One Whole\",\n  2: \"One Half\",\n  3: \"One Third\",\n  4: \"Fourth\",\n  5: \"5th\",\n  6: \"6th\",\n  7: \"7th\",\n  8: \"8th\",\n  9: \"9th\",\n  10: \"10th\",\n  11: \"11th\",\n  12: \"12th\"\n};\n\n// Constructors\n\nfunction distance(a, b) {\n  let x1 = a[0];\n  let y1 = a[1];\n  let x2 = b[0];\n  let y2 = b[1];\n  let dX = x2 - x1;\n  let dY = y2 - y1;\n  return Math.sqrt(Math.pow(dX, 2) + Math.pow(dY, 2));\n}\n\nconst wallObj = {\n  1: [],\n  2: [],\n  3: [],\n  4: [],\n  5: [],\n  6: [],\n  7: [],\n  8: [],\n  9: [],\n  10: [],\n  11: [],\n  12: []\n};\n\nfor (var i = 1; i <= 12; i++) {\n  let w = wallWidth / i;\n  for (var j = 0; j < i; j++) {\n    let h = height;\n    let x = j * w + w / 2 + (WINDOW_WIDTH-wallWidth) / 2;\n    let y = i * h;\n    let tile = createTile(x, y, w, h, i);\n    wallObj[i].push(tile);\n    app.stage.addChild(tile);\n  }\n}\n\nfunction newTexture(self, color) {\n  var graphics = new PIXI.Graphics();\n  graphics.lineStyle(3, 0xb7b7b7, 1);\n  graphics.beginFill(color);\n  graphics.drawRoundedRect(0, 0, self.width - 3, self.height - 3, 3);\n  graphics.endFill();\n  return app.renderer.generateTexture(graphics);\n}\n\nfunction swapCompleted() {\n  swapping = false;\n}\n\nfunction reset(){\n    let keys = Object.keys(wallObj)\n    keys.forEach(k=>{\n        let r = wallObj[k]\n        r.forEach(e=>{\n            e.tile.texture = newTexture(this, 0xffffff)\n        })\n    })\n}\n\nfunction moveRowUp(row) {\n  row.forEach(t =>\n    createjs.Tween.get(t).to(\n      { y: t.y - height },\n      1000,\n      createjs.Ease.getPowInOut(4)\n    )\n  );\n}\n\nfunction moveRowDown(row) {\n  row.forEach(t =>\n    createjs.Tween.get(t).to(\n      { y: t.y + height },\n      1000,\n      createjs.Ease.getPowInOut(4)\n    )\n  );\n}\n\nfunction sendRowToBottom(row1, row2, start) {\n  let y1 = row1[0].y;\n  let y2 = row2[0].y;\n  swapping = true;\n  for (var row in wallObj) {\n    if (wallObj[row][0].y > start) {\n      moveRowUp(wallObj[row]);\n    }\n  }\n  row1.forEach(t =>\n    createjs.Tween.get(t)\n      .to({ y: 12 * height }, 1000, createjs.Ease.getPowInOut(4))\n      .call(swapCompleted)\n  );\n}\n\nlet tickArray = [];\n\nfunction initTickArray(d) {\n  for (var i = 0; i <= 12; i++) {\n    let tick = new PIXI.Graphics();\n    tick.lineStyle(4, 0xb7b7b7, 1);\n    tick.moveTo(wallX, 12.5 * height);\n    tick.lineTo(wallX, 13.5 * height);\n    app.stage.addChild(tick);\n    tickArray.push(tick);\n    createjs.Tween.get(tick).to(\n      { x: (wallWidth / d) * i },\n      1000,\n      createjs.Ease.getPowInOut(4)\n    );\n  }\n}\n\nfunction drawNumberLine(den) {\n  let line = new PIXI.Graphics();\n  line.lineStyle(4, 0xb7b7b7, 1);\n  line.moveTo(wallX, 13 * height);\n  line.lineTo(wallX + wallWidth, 13 * height);\n  app.stage.addChild(line);\n}\n\nfunction animateTicks(den) {\n  tickArray.forEach((t, i) => {\n    if (i > den) {\n      createjs.Tween.get(t).to(\n        { x: wallWidth },\n        1000,\n        createjs.Ease.getPowInOut(4)\n      );\n    } else {\n      createjs.Tween.get(t).to(\n        { x: (wallWidth / den) * i },\n        1000,\n        createjs.Ease.getPowInOut(4)\n      );\n    }\n  });\n}\n\nfunction swapRow(row, start, end) {\n  if (Math.abs(start - end) < 30) {\n    row.forEach(t =>\n      createjs.Tween.get(t)\n        .to({ y: start }, 1000, createjs.Ease.getPowInOut(4))\n        .call(swapCompleted)\n    );\n  }\n  // Moved up\n  else if (start > end) {\n    for (var r in wallObj) {\n      if (wallObj[r][0].y < start && wallObj[r][0].y > end) {\n        moveRowDown(wallObj[r]);\n      }\n    }\n    let roundedEnd = Math.ceil(end / height) * height;\n    row.forEach(t =>\n      createjs.Tween.get(t)\n        .to({ y: roundedEnd }, 1000, createjs.Ease.getPowInOut(4))\n        .call(swapCompleted)\n    );\n  }\n  // Moved down\n  else if (start < end) {\n    for (var r in wallObj) {\n      if (wallObj[r][0].y > start && wallObj[r][0].y < end) {\n        moveRowUp(wallObj[r]);\n      }\n    }\n    let roundedEnd = Math.floor(end / height) * height;\n    row.forEach(t =>\n      createjs.Tween.get(t)\n        .to({ y: roundedEnd }, 1000, createjs.Ease.getPowInOut(4))\n        .call(swapCompleted)\n    );\n  }\n}\n\nfunction createTile(x, y, w, h, d) {\n  var graphics = new PIXI.Graphics();\n  graphics.lineStyle(3, 0xb7b7b7, 1);\n  graphics.beginFill(0xffffff);\n  graphics.drawRoundedRect(0, 0, w, h, 3);\n  graphics.endFill();\n\n  var texture = app.renderer.generateTexture(graphics);\n  let tile = new PIXI.Sprite(texture);\n  tile.anchor.set(0.5);\n\n  let den = new PIXI.Text(labels[d], {\n    fontFamily: \"Arial\",\n    fontSize: h / 2,\n    fill: 0xffffff,\n    align: \"center\"\n  });\n  den.anchor.set(0.5);\n\n  let tileContainer = new PIXI.Container();\n\n  tile.on(\"pointerdown\", onDragStart);\n\n  tileContainer.addChild(tile);\n  tileContainer.addChild(den);\n\n  tileContainer.active = false;\n  tileContainer.interactive = true;\n  tileContainer.den = d;\n  tileContainer.buttonMode = true;\n  //tileContainer.anchor.set(0.5);\n\n  tileContainer\n    .on(\"pointerdown\", onDragStart)\n    .on(\"pointerup\", onDragEnd)\n    .on(\"pointerupoutside\", onDragEnd)\n    .on(\"pointermove\", onDragMove);\n\n  // move the sprite to its designated position\n  tileContainer.x = x;\n  tileContainer.y = y;\n\n  tileContainer.tile = tile;\n  return tileContainer;\n}\n\nfunction onDragStart(event) {\n  if (!swapping) {\n    console.log(\"setting dragging to true\");\n    this.dragging = true;\n    this.dragStartedAt = this.y;\n    this.data = event.data;\n    this.alpha = 0.5;\n  }\n}\n\nfunction onDragEnd() {\n  if (this.wasDragged) {\n    this.wasDragged = false;\n    let row = wallObj[this.den];\n    activeRow = this.den;\n    swapRow(row, this.dragStartedAt, this.y);\n    if (this.y > 12 * height) {\n      animateTicks(activeRow);\n    }\n  } else {\n    this.active = !this.active;\n    this.tile.texture = this.active\n      ? newTexture(this, 0xfe6f61)\n      : newTexture(this, 0xffffff);\n  }\n  this.alpha = 1;\n  this.dragging = false;\n  this.data = null;\n}\n\nfunction onDragMove() {\n  if (this.dragging) {\n    this.wasDragged = true;\n    var newPosition = this.data.getLocalPosition(this.parent);\n    wallObj[this.den].forEach(t => {\n      t.parent.addChild(t);\n      t.y = newPosition.y;\n    });\n  }\n}\n}\n"]},"metadata":{},"sourceType":"module"}