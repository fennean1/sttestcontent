{"ast":null,"code":"import * as PIXI from \"pixi.js\";\nimport * as CONST from \"./const.js\";\nimport { TweenMax, TimelineLite, Power2, Elastic, CSSPlugin, TweenLite, TimelineMax } from \"gsap/TweenMax\";\nconst ASSETS = CONST.ASSETS;\nexport const init = (app, setup) => {\n  // Constants\n  const BLUE_TEXTURE = new PIXI.Texture.from(CONST.ASSETS.BLUE_CIRCLE);\n  const LINE_PERCENTAGE = 0.8;\n  const PIN_TEXTURE = new PIXI.Texture.from(ASSETS.SHARP_PIN);\n  const MEASURE_PIN_TEXTURE = new PIXI.Texture.from(ASSETS.MEASURE_PIN); // Initial State\n\n  let state = {\n    valA: 8,\n    valB: 8,\n    lineMax: 30\n  };\n  console.log(\"setupwidth\", setup.width);\n  console.log(\"windowheight\", window.innerHeight); // Layout Parameters\n\n  let WINDOW_WIDTH = setup.width;\n  let WINDOW_HEIGHT = setup.height;\n  let BAR_HEIGHT = WINDOW_HEIGHT / 15;\n\n  class Rowwow extends PIXI.Sprite {\n    constructor() {\n      super();\n      console.log(\"this\", this);\n      let graphics = new PIXI.Graphics();\n      this.addChild(graphics);\n      console.log(\"Graphbics parent\", graphics.parent.balls());\n    }\n\n    balls(input) {\n      console.log(\"balls called\");\n\n      if (input) {\n        return this.balls(false);\n      }\n    }\n\n  }\n\n  class Row extends PIXI.Container {\n    constructor(num, den, width, ID) {\n      super(); // Default values\n\n      this.incDenonimator = inc => {\n        g.clear();\n        g.lineStyle(3, 0x000000);\n        g.drawRoundedRect(0, 0, this.width, BAR_HEIGHT, 1);\n        let R = app.renderer.generateTexture(g);\n        let s = new PIXI.Sprite();\n        this.container.addChild(s);\n        s.texture = R;\n        s.x = 0;\n\n        if (inc > 0) {\n          const onComplete = () => {\n            s.on('pointerdown', spritePointerDown);\n            s.on('pointerup', spritePointerUp);\n            s.on('pointermove', spritePointerMoved);\n            s.interactive = true;\n            s.active = false;\n            this.sprites.push(s);\n            this.draw();\n          };\n\n          TweenMax.to(this, 0.25, {\n            denominator: this.denominator + 1,\n            onUpdate: this.draw,\n            onComplete: onComplete\n          });\n        } else if (inc < 0) {\n          let removeme = this.sprites.pop();\n          this.container.removeChild(removeme);\n\n          const onComplete = () => {\n            this.draw();\n            this.container.removeChild(s);\n          };\n\n          TweenMax.to(this, 0.25, {\n            denominator: this.denominator - 1,\n            onUpdate: this.draw,\n            onComplete: onComplete\n          });\n        }\n      };\n\n      this.numerator = num;\n      this.denominator = den;\n      this.width = width;\n      this.id = ID;\n      this.container = new PIXI.Container();\n      this.container.id = ID;\n      this.container.width = width;\n      this.container.interactive = true;\n      this.container.y = 0;\n      this.container.x = 0;\n      this.sprites = [];\n      this.blockWidth = width / this.denominator;\n      this.blockA = new PIXI.Graphics();\n      this.blockA.lineStyle(3, 0x000000);\n      this.blockA.drawRoundedRect(0, 0, this.blockWidth, BAR_HEIGHT, 1);\n      this.myA = app.renderer.generateTexture(this.blockA);\n      this.blockB = new PIXI.Graphics();\n      this.blockB.beginFill(0xff4772);\n      this.blockB.lineStyle(3, 0x000000);\n      this.blockB.drawRoundedRect(0, 0, this.blockWidth, BAR_HEIGHT, 1);\n      this.myB = app.renderer.generateTexture(this.blockB);\n\n      let _g = new PIXI.Graphics();\n\n      for (let i = 0; i < this.denominator; i++) {\n        console.log(\"balls\");\n        let s = new PIXI.Sprite.from(myA);\n        s.on('pointerdown', spritePointerDown);\n        s.on('pointerup', spritePointerUp);\n        s.on('pointermove', spritePointerMoved);\n        s.interactive = true;\n        s.active = false;\n        s.x = i * LINE_WIDTH / this.denominator;\n        s.y = WINDOW_HEIGHT / 2 - BAR_HEIGHT;\n        this.sprites.push(s);\n        this.container.addChild(s);\n      } //  Attached methods\n\n\n      this.container.on('pointerdown', containerPointerDown);\n      this.container.on('pointerup', containerPointerUp);\n      this.container.on('pointermove', containerPointerMove);\n    }\n\n    draw(width) {\n      if (width) {\n        this.width = width;\n      }\n\n      this.blockWidth = this.width / this.denominator;\n      this.blockA.clear();\n      this.blockA.lineStyle(3, 0x000000);\n      this.blockA.drawRoundedRect(0, 0, this.blockWidth, BAR_HEIGHT, 1);\n      myA = app.renderer.generateTexture(this.blockA);\n      this.blockB.clear();\n      this.blockB.beginFill(0xff4772);\n      this.blockB.lineStyle(3, 0x000000);\n      this.blockB.drawRoundedRect(0, 0, this.blockWidth, BAR_HEIGHT, 1);\n      myB = app.renderer.generateTexture(this.blockB);\n\n      for (let i = 0; i < this.sprites.length; i++) {\n        if (this.sprites[i].active) {\n          this.sprites[i].texture = myB;\n        } else {\n          this.sprites[i].texture = myA;\n        }\n\n        this.sprites[i].x = this.blockWidth * i;\n        this.sprites[i].y = 0;\n      }\n    }\n\n    spritePointerDown(event) {\n      this.touched = true;\n      this.dragged = false;\n    }\n\n    spritePointerMoved(event) {\n      if (this.touched) {\n        console.log(\"pointermove\");\n        this.dragged = true;\n      }\n    }\n\n    spritePointerUp(event) {\n      this.touched = false;\n      console.log('this.draggeed', this.dragged);\n\n      if (!this.dragged && activated) {\n        this.dragged = false;\n        this.active = !this.active;\n        this.alpha = 0.2;\n        this.texture = this.active ? myB : myA;\n        TweenLite.to(this, 0.4, {\n          alpha: 1\n        });\n      }\n    }\n\n    containerPointerDown(event) {\n      app.stage.addChild(this);\n      activated = this.id == ActiveIndex;\n      ActiveIndex = this.id;\n      ActiveRow = Rows[ActiveIndex];\n      disableAllRowsExceptActive();\n      drawWhiskers();\n      placeButtons();\n      pinA.sprite.x = this.width + LINE_START;\n      pinA.sprite.round();\n      this.data = event.data;\n      this.startWidth = this.width;\n      this.dragStartY = event.data.global.y;\n      this.touching = true;\n      touching = true;\n      this.deltaTouch = {\n        x: this.x - event.data.global.x,\n        y: this.y - event.data.global.y\n      };\n    }\n\n    containerPointerUp(event) {\n      globalPointerUp();\n      this.touching = false;\n      touching = false;\n    }\n\n    containerPointerMove(event) {\n      if (this.touching) {\n        const newPosition = this.data.getLocalPosition(this.parent);\n        this.y = event.data.global.y + this.deltaTouch.y; // Keep within number line bounds.\n\n        if (this.y < TOP_LINE_Y) {\n          this.dragging = false;\n          this.y = TOP_LINE_Y;\n        } else if (this.y > BOTTOM_LINE_Y - BAR_HEIGHT) {\n          this.dragging = false;\n          this.y = BOTTOM_LINE_Y - BAR_HEIGHT;\n        } //this.x = event.data.global.x + this.deltaTouch.x\n        //pinA.sprite.x = this.x + this.width\n\n\n        this.dragged = true;\n      }\n    }\n\n  }\n\n  function globalPointerUp() {} // \n  // Called on resize\n\n\n  function resize(newFrame, flex) {\n    // Make sure all layout parameters are up to date.\n    updateLayoutParams(newFrame);\n  }\n\n  function updateLayoutParams(newFrame) {\n    let frame;\n\n    if (newFrame) {\n      frame = newFrame;\n    } else {\n      frame = {\n        width: WINDOW_WIDTH,\n        height: WINDOW_HEIGHT\n      };\n    }\n  } // Loading Script\n\n\n  function load() {\n    if (setup.props.features) {\n      features = setup.props.features;\n    }\n  } // Functions attached to app: (need to be destroyed)\n\n\n  app.resize = frame => resize(frame);\n\n  app.resizable = true;\n  load();\n};","map":{"version":3,"sources":["/Users/andrewfenner/Documents/MindResearch/Prototypes/newtestunit/src/js/newfractionstacks.js"],"names":["PIXI","CONST","TweenMax","TimelineLite","Power2","Elastic","CSSPlugin","TweenLite","TimelineMax","ASSETS","init","app","setup","BLUE_TEXTURE","Texture","from","BLUE_CIRCLE","LINE_PERCENTAGE","PIN_TEXTURE","SHARP_PIN","MEASURE_PIN_TEXTURE","MEASURE_PIN","state","valA","valB","lineMax","console","log","width","window","innerHeight","WINDOW_WIDTH","WINDOW_HEIGHT","height","BAR_HEIGHT","Rowwow","Sprite","constructor","graphics","Graphics","addChild","parent","balls","input","Row","Container","num","den","ID","incDenonimator","inc","g","clear","lineStyle","drawRoundedRect","R","renderer","generateTexture","s","container","texture","x","onComplete","on","spritePointerDown","spritePointerUp","spritePointerMoved","interactive","active","sprites","push","draw","to","denominator","onUpdate","removeme","pop","removeChild","numerator","id","y","blockWidth","blockA","myA","blockB","beginFill","myB","i","LINE_WIDTH","containerPointerDown","containerPointerUp","containerPointerMove","length","event","touched","dragged","activated","alpha","stage","ActiveIndex","ActiveRow","Rows","disableAllRowsExceptActive","drawWhiskers","placeButtons","pinA","sprite","LINE_START","round","data","startWidth","dragStartY","global","touching","deltaTouch","globalPointerUp","newPosition","getLocalPosition","TOP_LINE_Y","dragging","BOTTOM_LINE_Y","resize","newFrame","flex","updateLayoutParams","frame","load","props","features","resizable"],"mappings":"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","sourcesContent":["import * as PIXI from \"pixi.js\";\nimport * as CONST from \"./const.js\";\nimport { TweenMax, TimelineLite, Power2, Elastic, CSSPlugin, TweenLite, TimelineMax } from \"gsap/TweenMax\";\nconst ASSETS = CONST.ASSETS\n\nexport const init = (app, setup) => {\n\n  // Constants\n  const BLUE_TEXTURE = new PIXI.Texture.from(CONST.ASSETS.BLUE_CIRCLE)\n  const LINE_PERCENTAGE = 0.8\n  const PIN_TEXTURE = new PIXI.Texture.from(ASSETS.SHARP_PIN)\n  const MEASURE_PIN_TEXTURE = new PIXI.Texture.from(ASSETS.MEASURE_PIN)\n\n\n // Initial State\n  let state = {\n    valA: 8,\n    valB: 8,\n    lineMax: 30,\n  }\n\n  console.log(\"setupwidth\",setup.width)\n  console.log(\"windowheight\",window.innerHeight)\n\n  // Layout Parameters\n  let WINDOW_WIDTH = setup.width\n  let WINDOW_HEIGHT = setup.height\n  let BAR_HEIGHT = WINDOW_HEIGHT/15\n\n\n  class Rowwow extends PIXI.Sprite {\n    constructor(){\n      super()\n      console.log(\"this\",this)\n      let graphics = new PIXI.Graphics()\n      this.addChild(graphics)\n      console.log(\"Graphbics parent\",graphics.parent.balls())\n    }\n\n    balls(input) {\n      console.log(\"balls called\")\n       if (input) {\n         return this.balls(false)\n       }\n    }\n }\n \n  class Row extends PIXI.Container {\n\n    constructor(num,den,width,ID) {\n      super()\n        // Default values\n      this.numerator = num\n      this.denominator = den\n      this.width = width\n      this.id = ID\n    \n      this.container = new PIXI.Container()\n      this.container.id = ID\n      this.container.width = width\n      this.container.interactive = true\n      this.container.y = 0\n      this.container.x = 0\n      this.sprites = []\n    \n\n      this.blockWidth = width / this.denominator\n\n      this.blockA = new PIXI.Graphics()\n      this.blockA.lineStyle(3,0x000000) \n      this.blockA.drawRoundedRect(0,0,this.blockWidth,BAR_HEIGHT,1)\n      this.myA = app.renderer.generateTexture(this.blockA)\n\n      this.blockB = new PIXI.Graphics()\n      this.blockB.beginFill(0xff4772)\n      this.blockB.lineStyle(3,0x000000) \n      this.blockB.drawRoundedRect(0,0,this.blockWidth,BAR_HEIGHT,1)\n      this.myB = app.renderer.generateTexture(this.blockB)\n\n      let g = new PIXI.Graphics()    \n  \n      for (let i = 0;i<this.denominator;i++) {\n        console.log(\"balls\")\n        let s = new PIXI.Sprite.from(myA)\n        s.on('pointerdown',spritePointerDown)\n        s.on('pointerup',spritePointerUp)\n        s.on('pointermove',spritePointerMoved)\n        s.interactive = true\n        s.active = false\n        s.x = i*LINE_WIDTH/this.denominator\n        s.y = WINDOW_HEIGHT/2 - BAR_HEIGHT\n        this.sprites.push(s)\n        this.container.addChild(s)\n      }\n            //  Attached methods\n      this.container.on('pointerdown',containerPointerDown)\n      this.container.on('pointerup',containerPointerUp)\n      this.container.on('pointermove',containerPointerMove)\n\n    }\n  \n\n    incDenonimator = (inc) => {\n      g.clear()\n      g.lineStyle(3,0x000000) \n      g.drawRoundedRect(0,0,this.width,BAR_HEIGHT,1)\n      let R = app.renderer.generateTexture(g)\n      let s = new PIXI.Sprite()\n      this.container.addChild(s)\n      s.texture = R\n      s.x  = 0\n\n      if (inc > 0){\n        const onComplete = ()=>{\n          s.on('pointerdown',spritePointerDown)\n          s.on('pointerup',spritePointerUp)\n          s.on('pointermove',spritePointerMoved)\n          s.interactive = true\n          s.active = false\n          this.sprites.push(s)\n          this.draw()\n        }\n        TweenMax.to(this, 0.25, {denominator: this.denominator+1,onUpdate: this.draw,onComplete: onComplete})\n      } else if (inc < 0) {\n        let removeme  = this.sprites.pop()\n        this.container.removeChild(removeme)\n        const onComplete = ()=>{\n          this.draw()\n          this.container.removeChild(s)\n        }\n        TweenMax.to(this, 0.25, {denominator: this.denominator-1,onUpdate: this.draw,onComplete: onComplete})\n      }\n    }\n\n    draw(width) {\n\n      if (width) {\n        this.width = width\n      }\n      this.blockWidth = this.width/this.denominator\n\n      this.blockA.clear()\n      this.blockA.lineStyle(3,0x000000) \n      this.blockA.drawRoundedRect(0,0,this.blockWidth,BAR_HEIGHT,1)\n      myA = app.renderer.generateTexture(this.blockA)\n\n      this.blockB.clear()\n      this.blockB.beginFill(0xff4772)\n      this.blockB.lineStyle(3,0x000000) \n      this.blockB.drawRoundedRect(0,0,this.blockWidth,BAR_HEIGHT,1)\n      myB = app.renderer.generateTexture(this.blockB)\n\n      for (let i = 0;i<this.sprites.length;i++){\n        if (this.sprites[i].active){\n          this.sprites[i].texture = myB\n        } else {\n          this.sprites[i].texture = myA\n        }\n\n        this.sprites[i].x = this.blockWidth*i\n        this.sprites[i].y = 0\n      }\n    }\n\n    spritePointerDown(event){\n      this.touched = true\n      this.dragged = false\n    }\n\n    spritePointerMoved(event) {\n\n      if (this.touched){\n        console.log(\"pointermove\")\n        this.dragged = true\n      }\n    }\n\n    spritePointerUp(event){\n         this.touched = false\n         console.log('this.draggeed',this.dragged)\n     if (!this.dragged && activated) {\n        this.dragged = false\n        this.active = !this.active\n        this.alpha = 0.2\n        this.texture = this.active ? myB : myA\n        TweenLite.to(this,0.4,{alpha: 1})\n       }\n    }\n\n \n   containerPointerDown(event) {\n     app.stage.addChild(this)\n      activated = this.id == ActiveIndex\n      ActiveIndex = this.id\n      ActiveRow = Rows[ActiveIndex]\n      disableAllRowsExceptActive()\n      drawWhiskers()\n      placeButtons()\n      pinA.sprite.x = this.width + LINE_START\n      pinA.sprite.round()\n      this.data = event.data\n      this.startWidth = this.width\n      this.dragStartY = event.data.global.y\n      this.touching = true\n      touching = true\n      this.deltaTouch = {\n        x: this.x - event.data.global.x,\n        y: this.y - event.data.global.y\n      }\n    }\n \n   containerPointerUp(event) {\n      globalPointerUp()\n      this.touching = false\n      touching = false\n    }\n\n    containerPointerMove(event) {\n\n      if (this.touching){\n        const newPosition = this.data.getLocalPosition(this.parent);\n        this.y = event.data.global.y + this.deltaTouch.y\n      // Keep within number line bounds.\n      if (this.y < TOP_LINE_Y){\n        this.dragging = false\n        this.y = TOP_LINE_Y\n      } else if (this.y > BOTTOM_LINE_Y-BAR_HEIGHT) {\n        this.dragging = false\n        this.y = BOTTOM_LINE_Y  - BAR_HEIGHT\n      }\n        //this.x = event.data.global.x + this.deltaTouch.x\n        //pinA.sprite.x = this.x + this.width\n        this.dragged = true\n      }\n    }\n  }\n\n\n\n  function globalPointerUp(){\n    // \n  }\n  \n  // Called on resize\n  function resize(newFrame,flex){\n    // Make sure all layout parameters are up to date.\n    updateLayoutParams(newFrame)\n  }\n\n  function updateLayoutParams(newFrame){\n    let frame;\n    if (newFrame){\n      frame = newFrame\n    } else {\n      frame = {width: WINDOW_WIDTH,height: WINDOW_HEIGHT}\n    }\n  }\n\n  // Loading Script\n  function load(){\n    if (setup.props.features){\n      features = setup.props.features\n    }\n  }\n\n  // Functions attached to app: (need to be destroyed)\n  app.resize = (frame) => resize(frame)\n  app.resizable = true\n\n  load()\n};\n"]},"metadata":{},"sourceType":"module"}